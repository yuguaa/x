import type { BubbleProps } from '@ant-design/x';
import { Bubble } from '@ant-design/x';
import XMarkdown from '@ant-design/x-markdown';
import { Avatar, Flex, Slider, Space, Typography } from 'antd';
import React from 'react';
import '@ant-design/x-markdown/themes/light.css';
import { useMarkdownTheme } from '../_utils';

const { Text } = Typography;

const text = `
ä¹Œé•‡æ˜¯ä¸­å›½è‘—åçš„æ±Ÿå—æ°´ä¹¡å¤é•‡ï¼Œä½äºŽæµ™æ±Ÿçœå˜‰å…´å¸‚æ¡ä¹¡å¸‚ï¼Œåœ°å¤„æ­å˜‰æ¹–å¹³åŽŸï¼Œè·ç¦»æ­å·žçº¦80å…¬é‡Œã€‚ä»¥ä¸‹æ˜¯å…³äºŽä¹Œé•‡çš„è¯¦ç»†ä»‹ç»ï¼š

---
### **1. åœ°ç†ä½ç½®**
- **åŒºåŸŸ**ï¼šé•¿ä¸‰è§’ä¸­å¿ƒåœ°å¸¦ï¼Œä¸œä¸´ä¸Šæµ·ï¼Œå—æŽ¥æ­å·žï¼ŒåŒ—é è‹å·žï¼Œäº¤é€šä¾¿åˆ©ã€‚
- **æ°´ç³»**ï¼šäº¬æ­å¤§è¿æ²³æ”¯æµç©¿é•‡è€Œè¿‡ï¼Œæ²³é“çºµæ¨ªï¼Œå…¸åž‹çš„"å°æ¡¥æµæ°´äººå®¶"é£Žè²Œã€‚
---
### **2. åŽ†å²æ–‡åŒ–**
- **å»ºé•‡åŽ†å²**ï¼šè·ä»Š1300å¤šå¹´ï¼Œæ˜Žæ¸…æ—¶æœŸå› ä¸ç»¸ä¸šç¹ç››æˆä¸ºå•†ä¸šé‡é•‡ã€‚
- **æ–‡åŒ–ç‰¹è‰²**ï¼š
  - **èŒ…ç›¾æ•…å±…**ï¼šä¸­å›½çŽ°ä»£æ–‡å­¦å·¨åŒ èŒ…ç›¾çš„å‡ºç”Ÿåœ°ï¼ŒçŽ°ä¸ºçºªå¿µé¦†ã€‚
  - **ä¼ ç»Ÿæ°‘ä¿—**ï¼šä¿ç•™è“å°èŠ±å¸ƒåˆ¶ä½œã€é«˜æ†èˆ¹è¡¨æ¼”ç­‰éžé—æŠ€è‰ºã€‚
- **ä¸–ç•Œäº’è”ç½‘å¤§ä¼š**ï¼š2014å¹´èµ·æˆä¸ºæ°¸ä¹…ä¼šå€ï¼Œè¢«èª‰ä¸º"ä¸œæ–¹è¾¾æ²ƒæ–¯"ã€‚
---
### **3. æ™¯åŒºåˆ’åˆ†**
- **ä¸œæ …**ï¼šä»¥åŽŸä½æ°‘ç”Ÿæ´»å’Œä¼ ç»Ÿä½œåŠä¸ºä¸»ï¼Œæ›´å…·çƒŸç«æ°”ã€‚
  - å¿…çœ‹æ™¯ç‚¹ï¼šèŒ…ç›¾æ•…å±…ã€æ±Ÿå—ç™¾åºŠé¦†ã€å®æºæ³°æŸ“åŠã€‚
- **è¥¿æ …**ï¼šç»è¿‡ä¿æŠ¤æ€§å¼€å‘ï¼Œå¤œæ™¯ç»ç¾Žï¼Œå•†ä¸šè®¾æ–½å®Œå–„ã€‚
  - æŽ¨èä½“éªŒï¼šæ‘‡æ©¹èˆ¹å¤œæ¸¸ã€æœ¨å¿ƒç¾Žæœ¯é¦†ã€æ˜­æ˜Žä¹¦é™¢ã€‚
---
### **4. ç‰¹è‰²ä½“éªŒ**
- **ä¹˜èˆ¹æ¸¸è§ˆ**ï¼šæœ¨èˆ¹ç©¿æ¢­æ°´é“ï¼Œæ„Ÿå—æ°´ä¹¡éŸµå‘³ã€‚
- **å¤œå®¿ä¹Œé•‡**ï¼šè¥¿æ …çš„æ°‘å®¿ä¸´æ°´è€Œå»ºï¼Œæ¸…æ™¨é™è°§å¦‚ç”»ã€‚
- **èŠ‚åº†æ´»åŠ¨**ï¼š
  - **ä¹Œé•‡æˆå‰§èŠ‚**ï¼ˆæ¯å¹´10æœˆï¼‰ï¼šå›½å†…å¤–æˆå‰§å›¢é˜Ÿé½èšã€‚
  - **æ˜¥èŠ‚æ°´ç¯ä¼š**ï¼šä¼ ç»ŸèŠ±ç¯æ˜ ç…§æ°´é¢ã€‚
---
### **5. ç¾Žé£Ÿä¸Žç‰¹äº§**
- **å°åƒ**ï¼šå®šèƒœç³•ã€å§‘å«‚é¥¼ã€ç¾Šè‚‰é¢ã€èåœä¸é¥¼ã€‚
- **ä¸‰ç™½é…’**ï¼šæœ¬åœ°ç±³é…’ï¼Œé†‡é¦™ç”˜å†½ã€‚
- **æ‰‹å·¥åˆ¶å“**ï¼šè“å°èŠ±å¸ƒã€ç«¹ç¼–å·¥è‰ºå“ã€‚
---
### **6. æ—…æ¸¸è´´å£«**
- **æœ€ä½³æ—¶é—´**ï¼šæ˜¥ç§‹å­£ï¼ˆé¿å¼€æ¢…é›¨å­£ï¼‰ï¼›å†¬å­£æ¸¸å®¢å°‘ï¼Œåˆ«æœ‰éŸµå‘³ã€‚
- **é—¨ç¥¨**ï¼š
  - ä¸œæ …110å…ƒï¼Œè¥¿æ …150å…ƒï¼Œè”ç¥¨190å…ƒï¼ˆå»ºè®®åˆ†ä¸¤å¤©æ¸¸çŽ©ï¼‰ã€‚
- **äº¤é€š**ï¼š
  - **é«˜é“**ï¼šè‡³æ¡ä¹¡ç«™ï¼Œè½¬å…¬äº¤K282ç›´è¾¾ã€‚
  - **è‡ªé©¾**ï¼šæ­å·ž/ä¸Šæµ·å‡ºå‘çº¦1.5-2å°æ—¶ã€‚
---
ä¹Œé•‡å®Œç¾Žèžåˆäº†å¤å…¸æ°´ä¹¡é£Žæƒ…ä¸ŽçŽ°ä»£æ–‡åŒ–æ´»åŠ›ï¼Œæ— è®ºæ˜¯è¿½å¯»åŽ†å²ï¼Œè¿˜æ˜¯äº«å—æ…¢ç”Ÿæ´»ï¼Œéƒ½æ˜¯ç†æƒ³ä¹‹é€‰ï¼å¦‚æžœæƒ³äº†è§£å…·ä½“æ™¯ç‚¹æˆ–è¡Œç¨‹è§„åˆ’ï¼Œæ¬¢è¿Žç»§ç»­æé—®~ ðŸš£â€â™€ï¸
`;

const RenderMarkdown: BubbleProps['contentRender'] = (content) => {
  const [className] = useMarkdownTheme();

  return <XMarkdown className={className}>{content}</XMarkdown>;
};

const App: React.FC = () => {
  const [value, setValue] = React.useState(1);

  return (
    <Flex vertical gap="middle">
      <Space direction="vertical" style={{ width: '100%' }}>
        <Text strong>Render step</Text>
        <Slider max={50} min={1} onChange={setValue} value={value} />
      </Space>

      <Bubble
        typing={{ effect: 'typing', step: value, interval: 150 }}
        content={text}
        contentRender={RenderMarkdown}
        components={{
          avatar: (
            <Avatar src="https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2Q5LRJ3LFPUAAAAAAAAAAAAADmJ7AQ/fmt.webp" />
          ),
        }}
      />
    </Flex>
  );
};

export default App;
